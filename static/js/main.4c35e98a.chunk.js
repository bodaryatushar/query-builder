(this["webpackJsonpquery-builder"]=this["webpackJsonpquery-builder"]||[]).push([[0],{120:function(e,t,n){e.exports=n(132)},132:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(13),l=n.n(r),o=n(75),c=n(12),u=n(94),m=n(18),s=n(40),d=n(133),p=n(190),f=n(189),v=n(83),b=n(182),y=n(184),g=n(50),h=n(17),N=n.n(h),O=n(25),C=n(21),E=n(93),x=n.n(E),j=n(92),I=n.n(j),S=n(68),w=n.n(S),T=n(77),k=n.n(T),R=n(192),M=n(174),A=n(186),_=Object(s.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},select:{width:"150px"}}}));function G(e){var t=e.name,n=e.value,a=void 0===n?"":n,r=e.onChange,l=e.options,o=e.title,c=Object(C.a)(e,["name","value","onChange","options","title"]),u=_();return i.a.createElement(M.a,{className:u.formControl},i.a.createElement(f.a,null,o),i.a.createElement(A.a,Object.assign({value:a,onChange:function(e){return r(e.target.value)},name:t,style:{marginRight:8},classes:{select:u.select}},c),l&&l.map((function(e,t){var n=e.name,a=e.title;return i.a.createElement(R.a,{value:n,key:t},a)}))))}var L=n(176),$=n(193);function F(e){var t=e.name,n=e.title,a=e.autoTitle,r=e.value,l=void 0===r?"":r,o=e.onChange,u=e.onBlur,m=e.readOnly,s=e.inline,d=e.InputProps,p=e.style,f=Object(C.a)(e,["name","title","autoTitle","value","onChange","onBlur","readOnly","inline","InputProps","style"]);return s?i.a.createElement(L.a,Object.assign({style:Object(c.a)({width:"100%"},p),placeholder:n,inputProps:{"aria-label":n},name:t,onChange:function(e){return o(e.target.value)},onBlur:u,autoComplete:"off",readOnly:m,disabled:m,value:l||""},f)):i.a.createElement($.a,Object.assign({id:"filled-".concat(t),label:n||a,name:t,style:Object(c.a)({width:"100%"},p),onChange:function(e){return o(e.target.value)},onBlur:u,autoComplete:"off",InputProps:Object(c.a)({readOnly:m},d),value:l||"",className:f.className},f))}F.defaultProps={rows:3,readOnly:!1};var B=F,P=n(180),V=n(134),Y=Object(s.a)((function(e){return{button:{margin:e.spacing(1)}}}));var q=function(e){var t=e.title,n=e.Icon,a=e.onClick,r=Y();return t?n?i.a.createElement(P.a,{variant:"contained",color:"secondary",className:r.button,startIcon:i.a.createElement(n,null),onClick:a},t):i.a.createElement(P.a,{variant:"contained",color:"secondary",className:r.button,onClick:a},t):i.a.createElement(V.a,{onClick:a,className:r.button},i.a.createElement(n,null))};function D(e){var t=e.type,n=void 0===t?"integer":t,r=e.title,l=e.onChange,o=e.value,c=void 0===o?0:o,u=(e.readOnly,e.scale),s=void 0===u?2:u,d=(e.customeFormat,e.onBlur),p=Object(C.a)(e,["type","title","onChange","value","readOnly","scale","customeFormat","onBlur"]),f=Object(a.useState)(c),v=Object(m.a)(f,2),b=v[0],y=v[1],g=Object(a.useCallback)((function(e){return Number(Number(e).toFixed("integer"===n?0:s))}),[n,s]);return i.a.useEffect((function(){y(g(c))}),[c,y,g]),i.a.createElement(B,Object.assign({onChange:y,title:r,type:"number",value:"".concat(b),onBlur:function(e){l(g(b)),y(g(b)),d&&d(e)}},p))}D.defaultProps={readOnly:!1};var z=D,K=n(103),H=n(181),W=n(183),U=n(185),X=n(14),J={date:H.a,time:W.a,datetime:U.a},Q={date:"DD/MM/YYYY",time:"LT",datetime:"DD/MM/YYYY h:mm a"};var Z=function(e){var t=e.inline,n=e.type,r=void 0===n?"date":n,l=Object(C.a)(e,["inline","type"]),o=Object(a.useState)(!1),u=Object(m.a)(o,2),s=u[0],d=u[1],p=i.a.useRef(),f=(l.name,l.title),v=l.format,b=(l.error,l.onChange),y=Object(C.a)(l,["name","title","format","error","onChange"]),g=J[r];return i.a.createElement(X.a,{utils:K.a},i.a.createElement(g,Object.assign({autoOk:!0,open:s,onChange:function(e){p.current=e},PopoverProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},disableToolbar:!0,variant:"inline"},t?{invalidDateMessage:""}:{},{style:Object(c.a)({width:"100%"},t?{margin:0}:{}),label:t?"":f,format:v||Q[r]},"time"!==r?{animateYearScrolling:!1}:{},y,{onKeyDown:function(e){40===e.keyCode&&d(!0)},onClose:function(){b(p.current),d(!1)},onOpen:function(){return d(!0)}})))},ee=n(135),te=n(187);var ne=Object(ee.a)((function(e){return{listbox:{maxHeight:"300px !important"}}}));function ae(e){var t=i.a.useState(!1),n=Object(m.a)(t,2),r=n[0],l=n[1],o=i.a.useState([]),u=Object(m.a)(o,2),s=u[0],d=u[1],p=i.a.useState(e.isMulti?[]:null),f=Object(m.a)(p,2),v=f[0],b=f[1],y=i.a.useState(""),g=Object(m.a)(y,2),h=g[0],E=g[1],x=e.value,j=e.onChange,I=e.options,S=e.optionLabelKey,w=void 0===S?"title":S,T=e.optionValueKey,k=void 0===T?"id":T,R=e.isMulti,M=e.title,A=e.fetchAPI,_=e.inline,G=e.InputProps,L=e.error,F=e.filterSelectedOptions,B=void 0!==F&&F,P=e.disableCloseOnSelect,V=void 0===P||P,Y=Object(C.a)(e,["value","onChange","options","optionLabelKey","optionValueKey","isMulti","title","fetchAPI","inline","InputProps","error","filterSelectedOptions","disableCloseOnSelect"]),q=ne(),D=i.a.useCallback((function(e){return I.find((function(t){return t&&t[k]===e.trim()}))}),[I,k]);function z(){return(z=Object(O.a)(N.a.mark((function e(){var t,n=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",E(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=function(e,t){var n=i.a.useRef(null),a=function(){return n.current&&clearTimeout(n.current)},r=function(e){return n.current=setTimeout(e,t)};return i.a.useEffect((function(){return function(){return a()}}),[]),function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];a(),r((function(){return e.apply(void 0,n)}))}}((function(){return z.apply(this,arguments)}),400);function H(e){"Backspace"===e.key&&v&&v[w]===h&&j(null)}function W(e){j("string"===typeof x?R?e.map((function(e){return e&&e[k]})).join(",")||[]:e&&e[k]:e)}return Object(a.useEffect)((function(){var e=!0;return r&&(A?Object(O.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A({search:h});case 2:n=t.sent,e&&d(n);case 4:case"end":return t.stop()}}),t)})))():d(I)),function(){e=!1}}),[A,I,h,r]),Object(a.useEffect)((function(){if("string"===typeof x){var e=x.split(",");b(R?e.map((function(e){return D(e)})):D(e[0]))}else b(x||(R?[]:null))}),[x,R,D]),i.a.createElement(te.a,Object.assign({getOptionSelected:function(e,t){return e[k]===t[k]},getOptionLabel:function(e){return e&&e[w]||""},id:"select-widget",open:r,onOpen:function(){return l(!0)},onClose:function(){return l(!1)},value:v,onChange:function(e,t){return W(t)},options:s||[],multiple:R,filterSelectedOptions:B,onInputChange:function(e,t){return K(t)},classes:{option:"menu-item",listbox:q.listbox},renderInput:function(e){return i.a.createElement($.a,Object.assign({},e,{error:L,label:_?"":M,fullWidth:!0,onClick:function(){return l(!0)},InputProps:Object(c.a)(Object(c.a)(Object(c.a)({},G),e.InputProps),{},{endAdornment:i.a.createElement(i.a.Fragment,null,e.InputProps.endAdornment)})},R?{}:{onKeyDown:H}))}},R?{disableCloseOnSelect:V}:{},Y))}var ie=[{name:"and",title:"AND"},{name:"or",title:"OR"},{name:"not",title:"NOT"}],re={enum:["=","!=","isNull","isNotNull"],text:["like","notLike","isNull","isNotNull"],string:["=","!=","like","notLike","isNull","isNotNull"],integer:["=","!=",">=","<=",">","<","between","notBetween","isNull","isNotNull"],boolean:["isTrue","isFalse"]},le={"=":"=","!=":"!=",">":">",">=":">=","<":"<","<=":"<=",in:"IN",notIn:"NOT IN",between:"BETWEEN",notBetween:"NOT BETWEEN",isNull:"IS NULL",isNotNull:"IS NOT NULL",like:"LIKE",notLike:"NOT LIKE"},oe=[{name:"=",title:"equals"},{name:"!=",title:"not equal"},{name:">",title:"greater than"},{name:">=",title:"greater or equal"},{name:"<",title:"less than"},{name:"<=",title:"less or equal"},{name:"in",title:"in"},{name:"between",title:"between"},{name:"notBetween",title:"not Between"},{name:"notIn",title:"not in"},{name:"isNull",title:"is null"},{name:"isNotNull",title:"is not null"},{name:"like",title:"contains"},{name:"notLike",title:"doesn't contain"},{name:"isTrue",title:"is true"},{name:"isFalse",title:"is false"}],ce=[{name:"Address",fullName:"com.example.db.Address",metaFields:[{name:"state",id:626,$version:0},{name:"id",id:625,$version:0},{name:"contact",id:624,$version:0},{name:"street",id:623,$version:0},{name:"city",id:615,$version:0},{name:"country",id:612,$version:0},{name:"zip",id:611,$version:0},{name:"area",id:609,$version:0}],id:41,version:0},{name:"Circle",fullName:"com.example.db.Circle",metaFields:[{name:"id",id:655,$version:0},{name:"name",id:654,$version:0},{name:"code",id:651,$version:0}],id:44,version:0},{name:"Company",fullName:"com.example.db.Company",metaFields:[{name:"employees",id:649,$version:0},{name:"id",id:648,$version:0},{name:"name",id:647,$version:0},{name:"notes",id:637,$version:0},{name:"code",id:635,$version:0}],id:43,version:0},{name:"Contact",fullName:"com.example.db.Contact",metaFields:[{name:"email",id:694,$version:0},{name:"id",id:693,$version:0},{name:"company",id:692,$version:0},{name:"phone",id:690,$version:0},{name:"firstName",id:686,$version:0},{name:"emails",id:682,$version:0},{name:"title",id:674,$version:0},{name:"dateOfBirth",id:669,$version:0},{name:"phones",id:667,$version:0},{name:"fullName",id:666,$version:0},{name:"circles",id:665,$version:0},{name:"notes",id:663,$version:0},{name:"addresses",id:662,$version:0},{name:"lastName",id:661,$version:0}],id:45,version:0},{name:"Country",fullName:"com.example.db.Country",metaFields:[{name:"id",id:595,$version:0},{name:"name",id:594,$version:0},{name:"code",id:591,$version:0}],id:39,version:0},{name:"Email",fullName:"com.example.db.Email",metaFields:[{name:"email",id:689,$version:0},{name:"id",id:687,$version:0},{name:"contact",id:683,$version:0}],id:46,version:0}],ue=[{modal:"com.example.db.Contact",fields:[{virtual:!0,readonly:!0,name:"email",type:"STRING",title:"Email"},{readonly:!0,hidden:!0,name:"id",type:"LONG",title:"Id",primary:!0},{massUpdate:!0,targetName:"name",targetSearch:["name","code"],name:"company",perms:null,type:"MANY_TO_ONE",title:"Company",target:"com.example.db.Company"},{virtual:!0,readonly:!0,name:"phone",type:"STRING",title:"Phone"},{name:"firstName",type:"STRING",title:"First name",required:!0},{targetName:"email",targetSearch:["email"],name:"emails",perms:null,type:"ONE_TO_MANY",title:"Emails",mappedBy:"contact",target:"com.example.db.Email"},{targetName:"name",targetSearch:["name","code"],name:"title",perms:null,type:"MANY_TO_ONE",title:"Title",target:"com.example.db.Title"},{name:"dateOfBirth",type:"DATE",title:"Date of birth"},{targetName:"phone",targetSearch:["phone"],name:"phones",perms:null,type:"ONE_TO_MANY",title:"Phones",mappedBy:"contact",target:"com.example.db.Phone"},{virtual:!0,nameSearch:["firstName","lastName"],readonly:!0,nameColumn:!0,name:"fullName",type:"STRING",title:"Full name"},{targetName:"name",targetSearch:["name","code"],name:"circles",perms:null,type:"MANY_TO_MANY",title:"Circles",target:"com.example.db.Circle"},{name:"notes",type:"TEXT",title:"Notes"},{targetName:null,targetSearch:[],name:"addresses",perms:null,type:"ONE_TO_MANY",title:"Addresses",mappedBy:"contact",target:"com.example.db.Address"},{name:"lastName",type:"STRING",title:"Last name",required:!0}]},{modal:"com.example.db.Address",fields:[{name:"state",type:"STRING",title:"State"},{readonly:!0,hidden:!0,name:"id",type:"LONG",title:"Id",primary:!0},{targetName:"fullName",targetSearch:["fullName","firstName","lastName"],name:"contact",perms:null,type:"MANY_TO_ONE",title:"Contact",required:!0,target:"com.example.db.Contact"},{name:"street",maxSize:255,type:"STRING",title:"Street",required:!0},{name:"city",type:"STRING",title:"City"},{targetName:"name",targetSearch:["name","code"],name:"country",perms:null,type:"MANY_TO_ONE",title:"Country",target:"com.example.db.Country"},{name:"zip",type:"STRING",title:"Zip"},{name:"area",maxSize:255,type:"STRING",title:"Area"}]},{modal:"com.example.db.Circle",fields:[{readonly:!0,hidden:!0,name:"id",type:"LONG",title:"Id",primary:!0},{nullable:!0,unique:!0,name:"name",maxSize:2147483647,minSize:2,type:"STRING",title:"Name",required:!0},{nullable:!0,unique:!0,name:"code",maxSize:2147483647,minSize:2,type:"STRING",title:"Code",required:!0}]},{modal:"com.example.db.Company",fields:[{targetName:"fullName",targetSearch:["fullName","firstName","lastName"],name:"employees",perms:null,type:"ONE_TO_MANY",title:"Employees",mappedBy:"company",target:"com.example.db.Contact"},{readonly:!0,hidden:!0,name:"id",type:"LONG",title:"Id",primary:!0},{nullable:!0,unique:!0,name:"name",maxSize:2147483647,minSize:2,type:"STRING",title:"Name",required:!0},{name:"notes",type:"TEXT",title:"Notes"},{nullable:!0,unique:!0,name:"code",maxSize:2147483647,minSize:2,type:"STRING",title:"Code",required:!0}]},{modal:"com.example.db.Country",fields:[{readonly:!0,hidden:!0,name:"id",type:"LONG",title:"Id",primary:!0},{nullable:!0,unique:!0,name:"name",maxSize:2147483647,minSize:2,type:"STRING",title:"Name",required:!0},{nullable:!0,unique:!0,name:"code",maxSize:2147483647,minSize:2,type:"STRING",title:"Code",required:!0}]},{modal:"com.example.db.Email",fields:[{nullable:!0,nameColumn:!0,unique:!0,name:"email",type:"STRING",title:"Email",required:!0},{readonly:!0,hidden:!0,name:"id",type:"LONG",title:"Id",primary:!0},{targetName:"fullName",targetSearch:["fullName","firstName","lastName"],name:"contact",perms:null,type:"MANY_TO_ONE",title:"Contact",required:!0,target:"com.example.db.Contact"}]}],me=[{model:"com.example.db.Circle",data:[{id:1,title:"family",name:"Family"},{id:2,title:"business",name:"Business"}]},{model:"com.example.db.Address",data:[]},{model:"com.example.db.Company",data:[{id:1,title:"xyz",name:"XYZ"},{id:2,title:"abc",name:"ABC"}]},{model:"com.example.db.Contact",data:[]},{model:"com.example.db.Country",data:[{id:1,title:"ind",name:"India"},{id:2,title:"ger",name:"Germany"}]},{model:"com.example.db.Email",data:[]}];function se(e){return de.apply(this,arguments)}function de(){return(de=Object(O.a)(N.a.mark((function e(t){var n,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.search,a=void 0===n?"":n,e.abrupt("return",Promise.resolve(ce.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}))));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t){return fe.apply(this,arguments)}function fe(){return(fe=Object(O.a)(N.a.mark((function e(t,n){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n&&ue.filter((function(e){return e.modal===n}))[0],e.abrupt("return",Promise.resolve(a&&a.fields));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(){return(ve=Object(O.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t&&ue.filter((function(e){return e.modal===t}))[0],e.abrupt("return",Promise.resolve(n&&n.fields));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(O.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=me&&me.filter((function(e){return e.model==t}))[0],e.abrupt("return",Promise.resolve(n&&n.data));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ge=Object(s.a)((function(e){return{MuiAutocompleteRoot:{width:"250px",marginRight:"10px"}}}));function he(e){var t=e.initValue,n=void 0===t?"":t,a=e.getMetaFields,r=e.editor,l=e.onChange,o=e.value,c=e.classNames,u=i.a.useState([]),s=Object(m.a)(u,2),d=s[0],p=s[1],f=ge();i.a.useEffect((function(){Object(O.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:t=e.sent,p(t);case 4:case"end":return e.stop()}}),e)})))()}),[a]);var v=o.split("."),b=Object(m.a)(v,1)[0],y=o&&v.length>1&&d.some((function(e){return e.name===b})),g=y&&(d.find((function(e){return e.name===b}))||{}).target;function h(e){var t=e&&d.some((function(t){return t.name===e.name&&t.target}));l({name:"fieldName",value:"".concat(n).concat(e&&e.name).concat(t?".":"")},r),l({name:"fieldType",value:e&&e.type||""},r),l({name:"field",value:e},r)}var C=d&&d.find((function(e){return e.name===b}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(ae,{name:"fieldName",title:"Field Name",placeholder:"field name",options:d,optionLabelKey:"name",onChange:function(e){return h(e)},value:C,classes:{root:w()(f.MuiAutocompleteRoot,c&&c.root)}}),y&&g&&i.a.createElement(he,{getMetaFields:function(){return function(e){return ve.apply(this,arguments)}(g)},editor:r,initValue:"".concat(n).concat(b,"."),value:v.slice(1).join("."),onChange:l,classNames:c}))}var Ne=Object(s.a)((function(e){return{Container:{display:"flex"},rulesGroupHeader:{display:"flex"},paper:{margin:e.spacing(1),padding:e.spacing(3,2)},rules:{display:"flex"},MuiAutocompleteRoot:{width:"250px",marginRight:"10px"},disabled:{pointerEvents:"none",opacity:.5}}}));function Oe(e){var t=e.operator,n=e.editor,a=e.internalProps,r=a.onChange,l=a.value,o=Object(C.a)(a,["onChange","value"]),c=Ne();if(["like","notLike"].includes(t))return i.a.createElement(B,Object.assign({name:"fieldValue",onChange:function(e){return r({name:"fieldValue",value:e},n)},margin:"none",style:{marginTop:"15px",width:"250px !important"},value:l},o));if(["in","notIn"].includes(t)){var u=o.field,m=u.targetName,s=function(){var e=Object(O.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.search,n=be(u.target),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(ae,{name:"fieldValue",title:"Value",placeholder:"Value",fetchAPI:s,isMulti:!0,optionLabelKey:m,onChange:function(e){return r({name:"fieldValue",value:e},n)},value:l||[],classes:{root:c.MuiAutocompleteRoot}})}return null}function Ce(e){var t=e.Component,n=e.operator,a=e.editor,r=e.internalProps,l=r.onChange,o=r.value,u=r.value2,m=(r.classes,r.style),s=Object(C.a)(r,["onChange","value","value2","classes","style"]);return["=","!=",">",">=","<","<=","like","notLike"].includes(n)?i.a.createElement(t,Object.assign({name:"fieldValue",onChange:function(e){return l({name:"fieldValue",value:e},a)},value:o,style:m},s)):["between","notBetween"].includes(n)?i.a.createElement(i.a.Fragment,null,i.a.createElement(t,Object.assign({name:"fieldValue",style:Object(c.a)({marginRight:8},m),onChange:function(e){return l({name:"fieldValue",value:e},a)},value:o},s)),i.a.createElement(t,Object.assign({name:"fieldValue2",onChange:function(e){return l({name:"fieldValue2",value:e},a)},value:u,style:m},s))):null}function Ee(e){var t=e.type,n=e.operator,a=e.onChange,r=e.value,l=e.classes,o=e.editor,u=Object(C.a)(e,["type","operator","onChange","value","classes","editor"]),m=Object(c.a)({value:r.fieldValue,value2:r.fieldValue2,onChange:a},u),s={date:"DD/MM/YYYY",time:"LT",datetime:"DD/MM/YYYY h:mm a"},d=[],p={};switch(t){case"one_to_one":case"many_to_one":case"many_to_many":case"one_to_many":return i.a.createElement(Oe,{operator:n,editor:o,internalProps:Object(c.a)({},m)});case"date":case"time":case"datetime":var f=function(e){return e?k()(e,s[t]):null};return i.a.createElement(Ce,{Component:Z,operator:n,editor:o,internalProps:Object(c.a)(Object(c.a)({type:t,value:f(r.fieldValue),value2:f(r.fieldValue2),onChange:function(e,n){var i=e.name,r=e.value;return a({name:i,value:r&&r.format(s[t])},n)}},u),{},{margin:"none",classes:l,style:{marginTop:"15px",width:"250px !important"}})});case"integer":case"long":case"decimal":return p={Component:(d=u.field.selectionList&&u.field.selectionList.map((function(e){var t=e.title,n=e.value,a=e.data;return{name:a&&a.value||n,title:t}})))?G:z,operator:n,editor:o,internalProps:Object(c.a)({},d?Object(c.a)({options:d,classes:l},m):Object(c.a)(Object(c.a)({type:t},m),{},{margin:"none",classes:l,style:{marginTop:"15px",width:"250px !important"}}))},i.a.createElement(Ce,p);case"enum":return d=u.field.selectionList.map((function(e){var t=e.title,n=e.value,a=e.data;return{name:a&&a.value||n,title:t}})),i.a.createElement(Ce,{Component:G,operator:n,editor:o,internalProps:Object(c.a)({options:d,classes:l},m)});default:return p={Component:(d=u.field.selectionList&&u.field.selectionList.map((function(e){var t=e.title,n=e.value,a=e.data;return{name:a&&a.value||n,title:t}})))?G:B,operator:n,editor:o,internalProps:Object(c.a)({},d?Object(c.a)({options:d,classes:l},m):Object(c.a)(Object(c.a)({classes:l},m),{},{margin:"none",style:{marginTop:"15px",width:"250px !important"}}))},i.a.createElement(Ce,p)}}function xe(e){var t=e.getMetaFields,n=e.onChange,a=e.onRemoveRule,r=e.editor,l=e.value,o=l.fieldName,c=void 0===o?"":o,u=l.fieldType,m=void 0===u?"":u,s=l.field,d=l.operator,p=l.fieldValue,f=l.fieldValue2,v=void 0===f?"":f,b=Ne(),y=m.toLowerCase(),g=function(e,t){e.map((function(e){return re[e]=t}))};g(["long","decimal","date","time","datetime"],re.integer),g(["one_to_many"],re.text),g(["one_to_one","many_to_one","many_to_many"],["like","notLike","in","notIn","isNull"]);var h=oe.filter((function(e){return(re[y]||[]).includes(e.name)}));return i.a.createElement("div",{className:b.rules},i.a.createElement(he,{getMetaFields:t,editor:r,onChange:n,value:c}),i.a.createElement(G,{name:"operator",title:"Operator",options:h,onChange:function(e){n({name:"operator",value:e},r)},value:d}),d&&i.a.createElement(Ee,{type:y,operator:d,onChange:n,value:{fieldValue:p,fieldValue2:v},classes:b,editor:r,field:s}),i.a.createElement(q,{Icon:I.a,onClick:a}))}function je(e){var t=e.onAddGroup,n=e.isRemoveGroup,a=e.onRemoveGroup,r=e.onAddRule,l=e.onRemoveRule,o=e.editor,c=void 0===o?{}:o,u=e.getChildEditors,m=e.onChange,s=e.getMetaFields,p=e.isDisable,f=Ne(),v=c.id,b=c.rules,y=void 0===b?[]:b,g=u(c.id);return i.a.createElement(d.a,{variant:"outlined",className:w()(f.paper,p&&f.disabled)},i.a.createElement("div",{className:w()(f.rulesGroupHeader)},i.a.createElement(G,{name:"combinator",title:"Combinator",options:ie,value:c.combinator,onChange:function(e){return m({name:"combinator",value:e},c)}}),i.a.createElement(q,{title:"Rules",Icon:x.a,onClick:function(){return r(v)}}),i.a.createElement(q,{title:"Group",Icon:x.a,onClick:function(){return t(v)}}),n&&i.a.createElement(q,{title:"Group",Icon:I.a,onClick:function(){return a(v)}})),y.map((function(e,t){return i.a.createElement(i.a.Fragment,{key:t},i.a.createElement(xe,{getMetaFields:s,onRemoveRule:function(){return l(c.id)},onChange:function(e,n){return m(e,n,t)},editor:c,value:e}))})),g.map((function(e,n){return i.a.createElement(i.a.Fragment,{key:e.id},i.a.createElement(je,{isRemoveGroup:!0,onAddGroup:t,onRemoveGroup:a,onAddRule:r,onRemoveRule:l,getChildEditors:u,getMetaFields:s,onChange:function(e,t,n){return m(e,t,n)},editor:e}))})))}var Ie=n(179),Se=n(194),we=n(195),Te=Object(s.a)((function(e){return{root:{display:"flex",borderBottom:"solid 1px rgba(0, 0, 0, 0.54)",margin:"20px 0 7px 0"},chip:{margin:"4px",height:30},list:{display:"flex",padding:"0 !important"},listItem:{padding:"0 !important"},divider:{width:1,height:28,margin:4},buttonContainer:{display:"flex",width:"100%",justifyContent:"flex-end",alignItems:"center",position:"relative",bottom:-3},inputIconBtn:{margin:0,padding:0,color:"#bbb"}}}));function ke(e){var t=e.value,n=e.onDelete,a=(e.filters,e.handleClick),r=(Object(C.a)(e,["value","onDelete","filters","handleClick"]),Te());return i.a.createElement("div",{className:r.root,onClick:a},i.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},i.a.createElement(f.a,{style:{width:"100%"}},"Meta Field"),i.a.createElement(Ie.a,{className:r.list},t.map((function(e,t){return i.a.createElement(i.a.Fragment,{key:t},i.a.createElement(Se.a,{label:e.fieldName,onDelete:function(){return n(e)},className:r.chip}))})))),i.a.createElement("div",{className:r.buttonContainer},i.a.createElement(V.a,{"aria-label":"open",onClick:a,className:r.inputIconBtn},i.a.createElement(we.a,null))))}var Re=n(106),Me=n.n(Re),Ae=Object(s.a)((function(e){return{Container:{display:"flex"},rulesGroupHeader:{display:"flex"},paper:{margin:e.spacing(1),padding:e.spacing(3,2)},rules:{display:"flex"},MuiAutocompleteRoot:{width:"100%",marginRight:"10px"},MuiAutocompleteRoot1:{width:"500px"},title:{flexGrow:1},disabled:{pointerEvents:"none",opacity:.5},popoverContainer:{display:"flex",flexDirection:"column",padding:e.spacing(2)},typography:{display:"flex"},popoverHeader:{display:"flex",alignItems:"center",borderBottom:"solid 1px #DDD"}}})),_e=0,Ge=[{id:_e,parentId:-1,combinator:"and",rules:[{}]}];var Le=function(){var e=i.a.useState(null),t=Object(m.a)(e,2),n=t[0],a=t[1],r=i.a.useState(),l=Object(m.a)(r,2),s=l[0],h=l[1],N=i.a.useState([]),O=Object(m.a)(N,2),C=O[0],E=O[1],x=i.a.useState({}),j=Object(m.a)(x,2),I=j[0],S=j[1],w=i.a.useState("select"),T=Object(m.a)(w,1)[0],k=i.a.useState(Ge),R=Object(m.a)(k,2),M=R[0],A=R[1],_=i.a.useState(""),G=Object(m.a)(_,2),L=G[0],$=G[1],F=Ae(),P=s&&s.metaFields.map((function(e){return e.name}));function V(e){_e+=1,A((function(t){return[].concat(Object(u.a)(t),[{id:_e,parentId:e,rules:[]}])}))}function Y(e){A(Object(g.a)((function(t){var n=M.findIndex((function(t){return t.id===e}));t.splice(n,1)})))}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};A(Object(g.a)((function(n){var a=M.findIndex((function(t){return t.id===e}));n[a].rules=[].concat(Object(u.a)(n[a].rules),[t])})))}function z(e,t){A(Object(g.a)((function(n){n[M.findIndex((function(t){return t.id===e}))].rules.splice(t,1)})))}var K=function(e){return M.filter((function(t){return t.parentId===e}))};function H(e){var t=e.name,n=e.value;S(Object(g.a)((function(e){e[t]=n})))}function W(e,t){var n=e[0],a=n.rules,i=n.combinator,r=n.children,l=function(e){return e.map((function(e){var t=e.fieldName,n=e.field,a=e.operator;if(!t)return null;var i=e.fieldValue,r=e.fieldValue2,l=n.type.toLowerCase(),o=["long","integer","decimal","boolean"].includes(l);if(["one_to_one","many_to_one","many_to_many","one_to_many"].includes(l)){if(["in","notIn"].includes(a)){var c=i.map((function(e){return e.id}));return"".concat("self."+t.split(".")[0],".id ").concat(le[a]," (").concat(c,")")}return["isNotNull","isNull"].includes(a)?"".concat("self."+t+"."+t.targetName," ").concat(le[a]):"".concat("self."+t+"."+t.targetName," ").concat(le[a],' "').concat(i,'"')}if(o||(i="'".concat(i,"'"),r="'".concat(r,"'")),["between","notBetween"].includes(a))return"".concat("self."+t," ").concat(le[a]," ").concat(i," and ").concat(r);if(["isNotNull","isNull"].includes(a))return"".concat("self."+t," ").concat(le[a]);if(["isTrue","isFalse"].includes(a)){var u="isTrue"===a;return"".concat("self."+t," = ").concat(u)}return"".concat("self."+t," ").concat(le[a]," ").concat(i)}))}(a);if(r.length>0){var o=W(r,!0);l.push(o)}return t?" ("+l.join(" "+i.toUpperCase()+" ")+") ":l.join(" "+i.toUpperCase()+" ")}function U(){var e="",t=W(function(e){for(var t,n={},a=[],i=e.map((function(e,t){return n[e.id]=t,Object(c.a)(Object(c.a)({},e),{},{children:[]})})),r=0;r<i.length;r+=1)(t=i[r]).parentId>=0?i[n[t.parentId]].children.push(t):a.push(t);return a}(M)),n=s&&s.name,a=C?function(e){return e.map((function(e){return"self.".concat(e.fieldName," ").concat(e.aliasName?"as "+e.aliasName:"")})).join(",")}(C):"*";return s?(e+="".concat(T.toUpperCase()," ").concat(a," FROM ").concat(n," self "),t&&(e+="WHERE ".concat(t)),e):"Invalid query"}var X=function(){a(null)},J=Boolean(n);return i.a.createElement("div",null,i.a.createElement(y.a,{position:"static"},i.a.createElement(b.a,null,i.a.createElement(v.a,{variant:"h6",className:F.title},"Query Builder"))),i.a.createElement(d.a,{variant:"outlined",className:F.paper},i.a.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"column"}},i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(ae,{name:"metaModal",title:"Meta Modal",placeholder:"meta modal",fetchAPI:se,optionLabelKey:"name",onChange:function(e){h(e),E([]),A(Ge)},value:s,classes:{root:F.MuiAutocompleteRoot}})),s&&i.a.createElement("div",null,i.a.createElement(ke,{value:C,filters:C,handleClick:function(e){a(e.currentTarget)},onDelete:function(e){var t=C.findIndex((function(t){return t.fieldName===e.fieldName}));E(Object(g.a)((function(e){e.splice(t,1)})))}}),i.a.createElement(p.a,{id:_e,open:J,anchorEl:n,onClose:X,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},i.a.createElement("div",{className:F.popoverContainer},i.a.createElement("div",{className:F.popoverHeader},i.a.createElement(v.a,{variant:"h6",gutterBottom:!0,style:{flex:1}},"Select Field"),i.a.createElement(Me.a,{onClick:X})),i.a.createElement(he,{getMetaFields:function(){return pe(P,s&&s.fullName)},onChange:H,value:I&&I.fieldName||"",classNames:{root:F.MuiAutocompleteRoot1}}),i.a.createElement(B,{name:"aliasName",title:"Alias Name",placeholder:"Alias Name",onChange:function(e){return H({name:"aliasName",value:e})},value:I.aliasName,style:{width:"500px"}}),i.a.createElement(q,{title:"Select",onClick:function(){return function(){var e=I.fieldName,t=I.aliasName;E(Object(g.a)((function(n){n.push({fieldName:e,aliasName:t})}))),S({})}()}})))))),M.filter((function(e){return-1===e.parentId})).map((function(e){return i.a.createElement(i.a.Fragment,{key:e.id},i.a.createElement(je,{onAddGroup:V,onRemoveGroup:Y,onAddRule:D,onRemoveRule:z,getChildEditors:K,getMetaFields:function(){return pe(P,s&&s.fullName)},onChange:function(e,t,n){return function(e,t,n){var a=e.name,i=e.value;A(Object(g.a)((function(e){var r=M.findIndex((function(e){return e.id===t.id}));n>=0?Object.assign(e[r].rules[n]=Object(c.a)(Object(c.a)(Object(c.a)({},e[r].rules[n]),{},Object(o.a)({},a,i),"fieldName"===a?{operator:"",fieldValue:"",fieldValue2:""}:{}),"operator"===a?{fieldValue:"",fieldValue2:""}:{})):e[r][a]=i})))}(e,t,n)},editor:e,isDisable:!Boolean(s)}),i.a.createElement("br",null))})),i.a.createElement(q,{title:"Generate Query",onClick:function(){return $(U())}}),i.a.createElement(f.a,{color:"secondary"},L))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(Le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[120,1,2]]]);
//# sourceMappingURL=main.4c35e98a.chunk.js.map